(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{61298:function(e,t,n){Promise.resolve().then(n.bind(n,10759))},10759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(57437),a=n(27648),r=n(66070),i=n(62869);let o=(0,n(79205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var c=n(31047),l=n(88226),d=n(96215),u=n(70525),h=n(1696),g=n(2265);function f(){let{transactions:e}=(0,h.e)(),[t,n]=(0,g.useState)(0),[f,m]=(0,g.useState)(0),[x,v]=(0,g.useState)(0);return(0,g.useEffect)(()=>{let t=e.length,s=0;e.forEach(e=>{s+=e.amount}),s/=t;let a=0,r=new Date;e.forEach(e=>{let t=new Date(e.date);t.getFullYear()==r.getFullYear()&&t.getMonth()==r.getMonth()&&(a+=e.amount)}),n(s),m(t),v(a)},[e]),(0,s.jsx)("div",{className:"min-h-screen bg-background",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("header",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Payment History Manager"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Track, analyze, and understand your spending patterns"})]}),(0,s.jsx)(a.default,{href:"/manage",children:(0,s.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,s.jsx)(o,{className:"h-4 w-4 mr-2"}),"Manage Data"]})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,s.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-accent"}),"Payment History"]}),(0,s.jsx)(r.SZ,{children:"View your transactions sorted by date with monthly intervals"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Browse through your payment history, filter by date ranges, and view detailed information for each transaction."}),(0,s.jsx)(a.default,{href:"/history",children:(0,s.jsxs)(i.z,{className:"w-full bg-transparent",variant:"outline",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"View Payment History"]})})]})]}),(0,s.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-accent"}),"AI Spending Analysis"]}),(0,s.jsx)(r.SZ,{children:"Get intelligent insights about your monthly spending patterns"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Let AI analyze your spending habits and provide personalized insights to help you manage your finances better."}),(0,s.jsx)(a.default,{href:"/analysis",children:(0,s.jsxs)(i.z,{className:"w-full bg-transparent",variant:"outline",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"View AI Analysis"]})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"This Month"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x})]}),(0,s.jsx)("div",{className:"h-8 w-8 bg-accent/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 text-accent"})})]})})}),(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:f})]}),(0,s.jsx)("div",{className:"h-8 w-8 bg-accent/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"h-4 w-4 text-accent"})})]})})}),(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg. per Transaction"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:Math.round(t)})]}),(0,s.jsx)("div",{className:"h-8 w-8 bg-accent/10 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"h-4 w-4 text-accent"})})]})})})]})]})})}},62869:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var s=n(57437);n(2265);var a=n(37053),r=n(90535),i=n(94508);let o=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:n,size:r,asChild:c=!1,...l}=e,d=c?a.g7:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:n,size:r,className:t})),...l})}},66070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return r},aY:function(){return l},ll:function(){return o}});var s=n(57437);n(2265);var a=n(94508);function r(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...n})}function i(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...n})}function o(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...n})}function c(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...n})}function l(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...n})}},29116:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem("accessToken"),s=new Headers(t.headers);t.body instanceof FormData||s.set("Content-Type","application/json"),n&&s.set("Authorization","Bearer ".concat(n));let a=await fetch("https://suhyun444.duckdns.org/card"+e,{...t,headers:s});if(console.log(a),!a.ok){if(console.log(a),401===a.status)throw localStorage.removeItem("accessToken"),window.location.href="/card/login/google",Error("UnAuthorized");throw Error("API request failed")}return a.json()},a={get:e=>s(e),post:(e,t)=>s(e,{method:"POST",body:t instanceof FormData?t:JSON.stringify(t)}),patch:(e,t)=>s(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(e,{method:"DELETE"})}},1696:function(e,t,n){"use strict";n.d(t,{DataProvider:function(){return c},e:function(){return l}});var s=n(57437),a=n(2265),r=n(99376),i=n(29116);let o=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[n,c]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),g=(0,r.useRouter)(),f=(0,r.usePathname)(),m=f.startsWith("/login")||f.startsWith("/oauth2");(0,a.useEffect)(()=>{console.log("Check user login"),console.log(u),(async()=>{if(!u&&(console.log(f),!m))try{console.log("DataProvider: Checking login status..."),await i.h.get("/api/user/me"),console.log("DataProvider: Login verified."),h(!0)}catch(e){console.error("DataProvider: Login check failed, redirecting...",e),g.push("/login/google")}})()},[f,g]),(0,a.useEffect)(()=>{let e=localStorage.getItem("accessToken");if(console.log(e),!e){c([]);return}console.log(n.length),0==n.length&&(async()=>{try{let e=await i.h.get("/api/transactions");c(e),x(e)}catch(e){console.error("데이터 불러오기 실패:",e),c([])}})()},[]);let x=e=>{d(Array.from(new Set(e.map(e=>e.category))).sort())};return u||m?(0,s.jsx)(o.Provider,{value:{transactions:n,categories:l,addTransaction:e=>{let t={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9)};c(e=>[t,...e]),l.includes(e.category)||d(t=>[...t,e.category].sort())},updateTransaction:(e,t)=>{c(n=>n.map(n=>n.id===e?{...n,...t}:n));let n=t.category;n&&"string"==typeof n&&!l.includes(n)&&d(e=>[...e,n].sort())},deleteTransaction:e=>{c(t=>t.filter(t=>t.id!==e))},addCategory:e=>{l.includes(e)||d(t=>[...t,e].sort())},deleteCategory:e=>{d(t=>t.filter(t=>t!==e)),c(t=>t.map(t=>t.category===e?{...t,category:"Uncategorized"}:t))},importTransactions:e=>{c(e),x(e)},exportTransactions:()=>JSON.stringify(n,null,2),clearAllData:()=>{c([]),d([])}},children:t}):(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("div",{className:"text-lg",children:"Checking login status..."})})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},94508:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var s=n(61994),a=n(53335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,s.W)(t))}},31047:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},96215:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(79205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},88226:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(79205).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},70525:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},function(e){e.O(0,[958,971,117,744],function(){return e(e.s=61298)}),_N_E=e.O()}]);